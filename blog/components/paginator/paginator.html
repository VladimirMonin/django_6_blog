{# Paginator Component Template #}

<nav
  aria-label="Навигация по страницам"
  class="mt-4"
  id="paginator-nav"
  hx-swap-oob="true"
>
  <div
    class="d-flex justify-content-between align-items-center flex-wrap gap-3"
  >
    {# Пагинатор - SEO-friendly навигация #}
    <ul class="pagination mb-0">
      {# Кнопка "Предыдущая" #}
      <li class="page-item {% if not has_previous %}disabled{% endif %}">
        {% if has_previous %}
        <a
          class="page-link"
          href="?page={{ previous_page }}{{ search_param }}"
          hx-get="?page={{ previous_page }}{{ search_param }}"
          hx-target="#post-container"
          hx-swap="innerHTML"
          hx-push-url="true"
        >
          <i class="bi bi-chevron-left"></i> Назад
        </a>
        {% else %}
        <span class="page-link">
          <i class="bi bi-chevron-left"></i> Назад
        </span>
        {% endif %}
      </li>

      {# Кнопки страниц #} {% for page_num in page_range %}
      <li class="page-item {% if page_num == current_page %}active{% endif %}">
        <a
          class="page-link"
          href="?page={{ page_num }}{{ search_param }}"
          hx-get="?page={{ page_num }}{{ search_param }}"
          hx-target="#post-container"
          hx-swap="innerHTML"
          hx-push-url="true"
        >
          {{ page_num }}
        </a>
      </li>
      {% endfor %} {# Троеточие если есть еще страницы #} {% if total_pages > 5
      %} {% if current_page < total_pages|add:"-2" %}
      <li class="page-item disabled">
        <span class="page-link">...</span>
      </li>
      {% endif %} {% endif %} {# Кнопка "Следующая" #}
      <li class="page-item {% if not has_next %}disabled{% endif %}">
        {% if has_next %}
        <a
          class="page-link"
          href="?page={{ next_page }}{{ search_param }}"
          hx-get="?page={{ next_page }}{{ search_param }}"
          hx-target="#post-container"
          hx-swap="innerHTML"
          hx-push-url="true"
        >
          Вперед <i class="bi bi-chevron-right"></i>
        </a>
        {% else %}
        <span class="page-link">
          Вперед <i class="bi bi-chevron-right"></i>
        </span>
        {% endif %}
      </li>
    </ul>

    {# Кнопка "Загрузить еще" для текущей страницы #} {% if show_load_more and
    has_next %}
    <button
      class="btn btn-dark"
      hx-get="?page={{ next_page }}{{ search_param }}&load_more=true"
      hx-target="#post-container"
      hx-swap="beforeend"
      hx-indicator="#load-more-spinner"
    >
      <span
        id="load-more-spinner"
        class="htmx-indicator spinner-border spinner-border-sm me-2"
      ></span>
      Загрузить еще
      <i class="bi bi-arrow-down-circle"></i>
    </button>
    {% endif %}
  </div>
</nav>
