ğŸ‘¤ User Story: ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ Ğ˜Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ñ ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°

Ğ Ğ¾Ğ»ÑŒ: ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ / ĞĞ²Ñ‚Ğ¾Ñ€ Ğ±Ğ»Ğ¾Ğ³Ğ° (Ğ¢Ñ‹)
ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚: Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚Ğ° (Postgres + pgvector + Chonkie Pipeline). Ğ¤Ğ°Ğ·Ğ° 3 Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°.

ğŸ­ ĞĞºÑ‚ 1: "Ğ ÑƒÑ‚Ğ¸Ğ½Ğ° Ğ¿ĞµÑ€Ñ„ĞµĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸ÑÑ‚Ğ°" (Single Post Workflow)

Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹: Ğ¯ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ» ĞºÑ€ÑƒÑ‚ÑƒÑ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¿Ñ€Ğ¾ HTMX Ğ¸ Ñ…Ğ¾Ñ‡Ñƒ Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ ĞµÑ‘ Ñ‚Ğ°Ğº, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ĞºĞ°Ğ¶Ğ´Ğ°Ñ ÑÑ‚Ñ€Ğ¾Ñ‡ĞºĞ° ĞºĞ¾Ğ´Ğ° Ğ±Ñ‹Ğ»Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ² Ğ¿Ğ¾Ğ¸ÑĞºĞµ.

1. ĞĞ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°

Ğ¯ Ğ·Ğ°Ñ…Ğ¾Ğ¶Ñƒ Ğ² Django Admin -> Posts -> Add New.

Ğ’ Ğ¿Ğ¾Ğ»Ğµ Content (Markdown) Ñ Ğ²ÑÑ‚Ğ°Ğ²Ğ»ÑÑ Ñ‚ĞµĞºÑÑ‚ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸. Ğ¢Ğ°Ğ¼ ĞµÑÑ‚ÑŒ Ğ¸ Ñ‚ĞµĞ¾Ñ€Ğ¸Ñ, Ğ¸ Ğ±Ğ»Ğ¾ĞºĞ¸ ĞºĞ¾Ğ´Ğ° Ğ½Ğ° Python/JS, Ğ¸ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Mermaid.

Ğ¯ Ğ¿Ñ€Ğ¸ĞºÑ€ĞµĞ¿Ğ»ÑÑ Ğ¾Ğ±Ğ»Ğ¾Ğ¶ĞºÑƒ (ImageField).

Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: Ğ¯ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Save and Continue Editing".

2. ĞœĞ°Ğ³Ğ¸Ñ Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ (Post-Processing)

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ¿Ğ¾ÑÑ‚ Ğ² Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

Markdown Processing:

ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ Markdown Ğ² HTML.

ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ±Ğ»Ğ¾ĞºĞ¾Ğ² ĞºĞ¾Ğ´Ğ° (Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ° ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ°).

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (TOC) Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ² H2/H3.

Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ HTML Ğ² Ğ¿Ğ¾Ğ»Ğµ content_html Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ.

Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: ĞŸÑ€ÑĞ¼Ğ¾ Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞµ Ñ Ğ²Ğ¸Ğ¶Ñƒ Ğ¿Ñ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑ‚Ğ° (ĞºĞ°Ğº Ğ¾Ğ½ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµÑ‚ÑŒ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ).

3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° (Quality Control)

Ğ¯ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°Ñ Ğ¿Ğ¾ÑÑ‚ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ.

Ğ’Ğ¸Ğ¶Ñƒ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ HTML Ñ Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ¾Ğ¹ ĞºĞ¾Ğ´Ğ°.

Ğ’Ğ¸Ğ¶Ñƒ Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞµ Ğ¾Ğ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ.

ĞšĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸ Ğ¸ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾.

Ğ˜Ñ‚Ğ¾Ğ³: ĞŸĞ¾ÑÑ‚ Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½ Ğ¸ Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾.

ğŸ­ ĞĞºÑ‚ 2: "Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµÑĞµĞ»ĞµĞ½Ğ¸Ğµ" (Bulk Import Workflow)

Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹: Ğ¯ Ñ€ĞµÑˆĞ¸Ğ» Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ 50 ÑÑ‚Ğ°Ñ€Ñ‹Ñ… ÑÑ‚Ğ°Ñ‚ĞµĞ¹ Ğ¸Ğ· Obsidian (Markdown Ñ„Ğ°Ğ¹Ğ»Ñ‹) Ğ¸ Ğ¿Ğ°Ğ¿ĞºÑƒ Ñ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ°Ğ¼Ğ¸ Ğ² Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ğ³.

1. ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ°

ĞĞ° ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğµ Ñ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ñ Ğ¿Ğ°Ğ¿ĞºÑƒ my_old_blog/, Ğ³Ğ´Ğµ Ğ»ĞµĞ¶Ğ°Ñ‚ .md Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸ Ğ¿Ğ°Ğ¿ĞºĞ° images/.

Ğ¯ Ğ¿Ğ°ĞºÑƒÑ ÑÑ‚Ğ¾ Ğ²ÑÑ‘ Ğ² migration.zip.

2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° (Bulk Upload)

Ğ¯ Ğ·Ğ°Ñ…Ğ¾Ğ¶Ñƒ Ğ² Django Admin -> Import Tools -> Bulk Upload.

Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ migration.zip.

ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°Ñ "Start Import".

3. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° (Ingestion Engine)

Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ°Ñ€Ñ…Ğ¸Ğ² Ğ¸ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ ĞµĞ³Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ.

Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:

Ğ Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ° Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ°.

Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ .md Ñ„Ğ°Ğ¹Ğ»Ğ°.

ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Frontmatter) Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°, Ğ´Ğ°Ñ‚Ñ‹, Ñ‚ĞµĞ³Ğ¾Ğ².

ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑÑÑ‹Ğ»Ğ¾Ğº Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸ (Ğ·Ğ°Ğ¼ĞµĞ½Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿ÑƒÑ‚ĞµĞ¹ Ğ½Ğ° URL Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²).

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ² Post.

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ HTML Ğ¸Ğ· Markdown.

Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ»Ğ¾Ğ³ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°: "Imported 50 posts. Errors: 0".

4. Ğ¤Ğ¸Ğ½Ğ°Ğ»

Ğ’ÑĞµ 50 ÑÑ‚Ğ°Ñ‚ĞµĞ¹ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ² Ğ±Ğ°Ğ·Ğµ.

ĞšĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ñ‹ Ğº Ğ¿Ğ¾ÑÑ‚Ğ°Ğ¼.

Ğ¯ Ğ¼Ğ¾Ğ³Ñƒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ»ÑĞ±ÑƒÑ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¸ Ğ¾Ğ½Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµÑ‚ÑŒ Ñ‚Ğ°Ğº Ğ¶Ğµ, ĞºĞ°Ğº Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ğ°Ñ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ.

ğŸ§¬ Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ ĞŸÑ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ² (Mermaid)

Flow 1: ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (Ğ ÑƒÑ‡Ğ½Ğ°Ñ)
```mermaid
sequenceDiagram
    actor Me as ğŸ‘¤ Ğ¯ (Author)
    participant Admin as ğŸ–¥ï¸ Django Admin
    participant Core as âš™ï¸ Markdown Engine
    participant DB as ğŸ˜ PostgreSQL

    Me->>Admin: 1. ĞŸĞ¸ÑˆÑƒ Ğ¿Ğ¾ÑÑ‚ & Ğ–Ğ¼Ñƒ Save
    Admin->>DB: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Raw Markdown
    Admin->>Core: Ğ’Ñ‹Ğ·Ğ¾Ğ²: process_markdown(post)
    
    rect rgb(20, 40, 60)
        Note over Core: HTML Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
        Core->>Core: Markdown -> HTML
        Core->>Core: Syntax Highlighting
        Core->>Core: TOC Generation
    end
    
    Core->>DB: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ content_html
    DB-->>Admin: Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!
    Admin-->>Me: ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Preview

```
Flow 2: Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ (ZIP ĞÑ€Ñ…Ğ¸Ğ²)

```mermaid
sequenceDiagram
    actor Me as ğŸ‘¤ Ğ¯ (Author)
    participant UI as ğŸ–¥ï¸ Import UI
    participant Core as âš™ï¸ Import Logic
    participant DB as ğŸ˜ PostgreSQL

    Me->>UI: 1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ archive.zip
    UI->>Core: ĞŸĞµÑ€ĞµĞ´Ğ°ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»
    
    loop Processing Loop
        Core->>Core: Ğ Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ° & Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ MD
        Core->>Core: ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Frontmatter
        Core->>Core: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½Ğ¾Ğº
        Core->>DB: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Post
        Core->>Core: HTML Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ (ĞºĞ°Ğº Ğ² Flow 1)
    end

    Core-->>UI: ĞÑ‚Ñ‡ĞµÑ‚ Ğ¾Ğ± Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğµ
    UI-->>Me: "Import Complete ğŸ‰"
```