Вот концептуальный документ архитектуры вашего проекта, составленный на основе ваших предпочтений и проведенных исследований.

-----

# Концепция архитектуры и дизайна проекта: Django 6 Blog

**Версия документа:** 1.0
**Статус:** Утверждение концепции

Этот документ описывает философию дизайна, технологический стек и структурное разделение интерфейса проекта. Мы создаем современное, быстрое SSR-приложение (Server-Side Rendering), которое ощущается как SPA (Single Page Application), но остается простым в поддержке и SEO-оптимизированным.

-----

## 1\. Визуальная идентификация и UI-стратегия

Мы отходим от стандартных цветовых схем в пользу высококонтрастного, читаемого и акцентного дизайна.

### Цветовая палитра: "Контраст и Фокус"

* **Глобальный фон (Canvas):** Чистый белый (`#FFFFFF`). Это обеспечивает максимальную читаемость для блога, где контент стоит на первом месте.
* **Основной текст:** Темно-серый или черный для снижения нагрузки на глаза при чтении.
* **Интерактивные элементы (Кнопки):** Используем стиль `Bootstrap Dark` (глубокий черный/антрацит) с белым шрифтом. Это создает строгий, профессиональный вид для основных действий ("Отправить", "Войти", "Сохранить").
* **Акцентный цвет (Navigation & Context):** Желтый (`Bootstrap Warning`).
  * **Почему желтый?** Он используется для указания контекста: "Где я нахожусь?".
  * **Применение:**
    * Активный пункт в меню навигации.
    * Хлебные крошки (Breadcrumbs) — чтобы пользователь мгновенно видел путь.
    * Важные системные уведомления или лейблы (например, хештеги или категория поста).
    * Состояние "выбрано" или "текущая страница" в пагинации.

-----

## 2\. Технологический фундамент: "Почему эти технологии?"

Мы используем гибридный подход, сочетая надежность Django с модульностью современного фронтенда, но без сложности React/Vue.

### 1\. Django 6.0 (Beta)

**Роль:** Ядро системы.
**Почему:** Мы используем новую киллер-фичу Django 6 — **Template Partials** (Частичные шаблоны). Это позволяет определять фрагменты HTML прямо внутри основного файла шаблона, что идеально работает в связке с HTMX. Это снижает количество мелких файлов и ускоряет разработку.

### 2\. HTMX

**Роль:** Интерактивность.
**Почему:** Позволяет делать "живые" интерфейсы (лайки, комментарии, подгрузка постов) через HTML-атрибуты, не написав ни строчки сложного JavaScript. Это дает ощущение быстрого приложения без перезагрузки страниц.

### 3\. Django Components

**Роль:** Строительные блоки UI.
**Почему:** Позволяет инкапсулировать (спрятать внутри) HTML, CSS и логику отдельных элементов (например, карточки поста). Мы используем их там, где есть переиспользуемая верстка и сложная логика отображения.

### 4\. Bootstrap 5

**Роль:** Сетка и адаптивность.
**Почему:** Быстрая верстка, надежная сетка (Grid system), готовые классы для отступов и типографики. Мы переопределяем стандартные цвета Bootstrap под нашу палитру (Dark/Warning/White).

### 5\. Python-Markdown + Bleach

**Роль:** Контент.
**Почему:** Авторы пишут в Markdown. Мы сохраняем и исходник, и безопасный HTML в базе данных для максимальной производительности при чтении (Read-heavy architecture). Bleach гарантирует, что в HTML не попадут вредоносные скрипты.

-----

## 3\. Архитектура интерфейса: Что есть Что?

Самый важный раздел. Здесь мы определяем правила разделения кода, чтобы избежать хаоса. Мы делим всё на три уровня: **Полностраничные шаблоны**, **Частичные шаблоны (Partials)** и **Компоненты**.

### Уровень 1: Полностраничные шаблоны (Templates)

Это "скелет" страницы. Они отвечают за общую структуру URL-адреса.

* **Примеры:** `home.html`, `post_detail.html`, `category_list.html`.
* **Что делают:** Наследуются от базового шаблона (`base.html`), определяют SEO-теги, подключают сетку Bootstrap и расставляют Компоненты по местам.

### Уровень 2: Компоненты (Django Components)

Это независимые "кирпичики" интерфейса. Они самодостаточны: у них свой стиль и логика.

* **Навигационная панель (Navbar):**
  * Содержит логотип и меню.
  * **Почему компонент:** Сложная логика подсветки активного пункта (желтый акцент) и адаптивность для мобильных. Использует слоты для гибкости.
* **Боковая панель (Sidebar):**
  * Содержит список категорий, облако тегов, "Об авторе".
  * **Почему компонент:** Используется на разных страницах, логика получения данных (например, топ-5 тегов) инкапсулирована внутри компонента.
* **Хлебные крошки (Breadcrumbs):**
  * **Почему компонент:** Визуально выделенный элемент (желтый акцент), который программно генерирует путь на основе текущего URL.
* **Карточка поста (Post Card):**
  * Используется в списках, в "похожих постах", в результатах поиска.
  * **Почему компонент:** Единый стиль отображения заголовка, картинки и мета-информации. Если мы захотим изменить дизайн превью поста, мы поменяем его только в одном месте.
* **Алерт (Уведомление):**
  * Всплывающие сообщения об успехе/ошибке.
  * **Почему компонент:** Содержит JS-логику для автоскрытия и кнопку закрытия.

### Уровень 3: Частичные шаблоны (Template Partials / Django 6)

Это динамические зоны внутри страниц, которые обновляются через HTMX. В отличие от компонентов, они тесно связаны с контекстом конкретной страницы.

* **Список постов ("Бесконечная лента"):**
  * Мы оборачиваем цикл вывода постов в тег `{% partialdef post_list %}`.
  * **Как работает:** Кнопка "Загрузить еще" (темная) посылает запрос. Сервер рендерит *только* этот кусочек с новыми постами и возвращает его. HTMX добавляет его в конец списка.
* **Блок комментариев:**
  * Обернут в `{% partialdef comments_area %}`.
  * **Как работает:** При отправке нового комментария страница не перезагружается. Сервер возвращает обновленный список комментариев, который заменяет старый.
* **Форма поиска:**
  * Обернута в partial.
  * **Как работает:** При вводе текста результаты подгружаются в реальном времени ("Search as you type").

-----

## 4\. Сценарии взаимодействия (User Flow)

### Сценарий: Чтение списка постов

1. Пользователь заходит на главную. Фон белый.
2. Видит **Навбар** (Компонент), где "Главная" подсвечена желтым.
3. Видит список из **Карточек постов** (Компоненты).
4. Внизу видит темную кнопку "Загрузить еще".
5. При клике кнопка отправляет HTMX-запрос. Django рендерит следующую страницу постов, используя **Partial**, и вставляет их (Swap) в список. Страница не перезагружается.

### Сценарий: Просмотр поста

1. Пользователь кликает на пост.
2. Сверху появляются **Хлебные крошки** (Компонент) с желтыми элементами пути.
3. Контент поста (HTML из БД) отображается с подсветкой синтаксиса (Frontend JS).
4. Справа — **Сайдбар** (Компонент) с категориями.
5. Внизу — блок комментариев. Пользователь пишет текст, жмет темную кнопку "Отправить".
6. HTMX отправляет данные. Если есть ошибки (валидация), форма перерисовывается с текстом ошибок. Если успех — список комментариев обновляется (через **Partial**).

-----

## 5\. Итоговая структура файлов (Концепт)

```text
templates/
├── base.html              # Белый фон, подключение CSS/JS
├── home.html              # Использует component "post_card", содержит partial "post_list"
├── post_detail.html       # Содержит partial "comments"
components/
├── navbar/                # Темный/Желтый стиль
├── sidebar/               # Логика виджетов
├── post_card/             # Единый стиль превью
├── breadcrumbs/           # Желтые акценты
└── alert/                 # Всплывашки
static/
├── css/                   # Глобальные стили (bootstrap overrides)
└── js/                    # HTMX, Highlight.js, Bootstrap.js
```

Эта архитектура обеспечивает четкое разделение: **Компоненты** для визуального стиля и повторного использования, **Частичные шаблоны** для динамики данных (HTMX), **Django** для надежного бэкенда.
