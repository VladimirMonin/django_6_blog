# –§–∞–∑–∞ 4.15: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Unfold –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π –≤ Django Admin.

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã
- –û—Ü–µ–Ω–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ –µ—ë –∑–∞–ø—É—Å–∫–∞
- –í–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Unfold** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–µ–º—É –¥–ª—è Django Admin —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã—Ö actions –∏ –≤–∏–¥–∂–µ—Ç–æ–≤.

**Actions (–º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏):**
- "‚ôªÔ∏è Force Re-Index" ‚Äî —É–¥–∞–ª–∏—Ç—å —á–∞–Ω–∫–∏ –∏ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã
- "üí∞ Estimate Cost" ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:** –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–ò–ò –ø–æ–∏—Å–∫ –Ω–∞ –±–∞–∑–µ —Å–º—ã—Å–ª–æ–≤ ‚Äî –∫–æ–Ω—Ü–µ–ø—Ü–∏—è](../researches/report_6/–ò–ò%20–ø–æ–∏—Å–∫%20–Ω–∞%20–±–∞–∑–µ%20—Å–º—ã—Å–ª–æ–≤%20-%20–∫–æ–Ω—Ü–µ–ø—Ü–∏—è.md) ‚Äî "–≠–¢–ê–ü 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ DX"

---

## –ó–∞–¥–∞—á–∏

### Action: Force Re-Index

- [ ] –í `blog/admin.py` –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `force_reindex(modeladmin, request, queryset)`
- [ ] –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –≤ queryset:
  - –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏
  - –í—ã–∑–≤–∞—Ç—å `index_post(post)`
- [ ] –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ {n} –ø–æ—Å—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–æ {m} —á–∞–Ω–∫–æ–≤"
- [ ] –î–µ–∫–æ—Ä–∏—Ä–æ–≤–∞—Ç—å `@admin.action(description="‚ôªÔ∏è Force Re-Index")`

### Action: Estimate Cost

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `estimate_indexing_cost(modeladmin, request, queryset)`
- [ ] –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ tiktoken
- [ ] –í—ã—á–∏—Å–ª–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ —Ç–∞—Ä–∏—Ñ—É OpenAI (~$0.02 / 1M —Ç–æ–∫–µ–Ω–æ–≤)
- [ ] –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "–í—ã–±—Ä–∞–Ω–æ {n} –ø–æ—Å—Ç–æ–≤, ~{tokens} —Ç–æ–∫–µ–Ω–æ–≤, ~${cost}"
- [ ] –î–µ–∫–æ—Ä–∏—Ä–æ–≤–∞—Ç—å `@admin.action(description="üí∞ Estimate Cost")`

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è actions

- [ ] –î–æ–±–∞–≤–∏—Ç—å actions –≤ `PostAdmin.actions = [force_reindex, estimate_indexing_cost]`

### –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `chunks_count` –≤ list_display
- [ ] –ú–µ—Ç–æ–¥ `get_chunks_count(self, obj)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤
- [ ] –ü–æ—Å—Ç –±–µ–∑ —á–∞–Ω–∫–æ–≤ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (‚ö†Ô∏è)

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É

- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä "–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è": "–ï—Å—Ç—å —á–∞–Ω–∫–∏" / "–ù–µ—Ç —á–∞–Ω–∫–æ–≤"
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ã–π SimpleListFilter –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è —á–∞–Ω–∫–æ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [ ] Actions –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–ª–∏ staff —Å –ø—Ä–∞–≤–∞–º–∏
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ Force Re-Index (—á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É)

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç—ã –≤ —Å–ø–∏—Å–∫–µ ‚Üí "Force Re-Index" ‚Üí —á–∞–Ω–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã
- [ ] –í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç—ã ‚Üí "Estimate Cost" ‚Üí –ø–æ–∫–∞–∑–∞–Ω–∞ —Å—Ç–æ–∏–º–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É chunks_count –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é —á–∞–Ω–∫–æ–≤

---

## –ö–æ–º–º–∏—Ç

```
phase 4.15 feat: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Unfold –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω action "Force Re-Index" –≤ PostAdmin
- –î–æ–±–∞–≤–ª–µ–Ω action "Estimate Cost" —Å —Ä–∞—Å—á—ë—Ç–æ–º —á–µ—Ä–µ–∑ tiktoken
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ chunks_count –≤ list_display
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
```
