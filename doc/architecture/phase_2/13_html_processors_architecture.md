# üèóÔ∏è –°–µ—Ä–∏—è 13: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ HTML-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ ‚Äî Beautiful Soup 4 –∏ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

> Phase 2.5: –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML

**–ö–æ–º–º–∏—Ç—ã**: `2b74167`

---

## üéØ –¶–µ–ª—å —Ñ–∞–∑—ã

–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML –ø–æ—Å–ª–µ Markdown –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏. –î–æ–±–∞–≤–∏—Ç—å Bootstrap –∫–ª–∞—Å—Å—ã –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –Ω–∞ –±–∞–∑–µ Beautiful Soup 4.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–π —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Ç–∞–±–ª–∏—Ü—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ü–∏—Ç–∞—Ç—ã, –∫–æ–¥).

---

## ü§î –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—á–µ–º—É –Ω—É–∂–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã?

### –°–∏—Ç—É–∞—Ü–∏—è –ø–æ—Å–ª–µ Phase 2.3-2.4

–ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Markdown ‚Üí HTML —ç–ª–µ–º–µ–Ω—Ç—ã **–Ω–µ –∏–º–µ—é—Ç** Bootstrap –∫–ª–∞—Å—Å–æ–≤:

```html
<!-- ‚ùå Markdown –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Å—Ç—ã–π HTML -->
<table>
  <tr><td>–î–∞–Ω–Ω—ã–µ</td></tr>
</table>

<img src="image.png" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞">

<blockquote>
  <p>–¶–∏—Ç–∞—Ç–∞</p>
</blockquote>
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
- `<table>` –±–µ–∑ `.table`, `.table-striped` ‚Üí —Ç–∞–±–ª–∏—Ü—ã –≤—ã–≥–ª—è–¥—è—Ç –Ω–µ–∫—Ä–∞—Å–∏–≤–æ
- `<img>` –±–µ–∑ `.img-fluid` ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ
- `<blockquote>` –±–µ–∑ Bootstrap –∫–ª–∞—Å—Å–æ–≤ ‚Üí —Ü–∏—Ç–∞—Ç—ã –Ω–µ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω—ã
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Obsidian Callouts (`[!info]`, `[!warning]`)

### –ü–æ—á–µ–º—É –Ω–µ markdown –±–∏–±–ª–∏–æ—Ç–µ–∫–∞?

**Markdown –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** (python-markdown, pymdown-extensions) –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç **—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π HTML**:

```python
html = markdown.markdown("## Hello")
# –†–µ–∑—É–ª—å—Ç–∞—Ç: <h2>Hello</h2>
```

–û–Ω–∏ **–Ω–µ –∑–Ω–∞—é—Ç** –ø—Ä–æ Bootstrap, Tailwind, Material UI –∏ –¥—Ä—É–≥–∏–µ CSS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏.

**–†–µ—à–µ–Ω–∏–µ**: –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ HTML —á–µ—Ä–µ–∑ Beautiful Soup 4.

---

## üèõÔ∏è –§–∏–ª–æ—Å–æ—Ñ–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

```mermaid
graph LR
    A[Backend<br/>Python] -->|–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã| B[HTML —Å Bootstrap]
    B --> C[Frontend<br/>JavaScript]
    C -->|–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å| D[–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã]
    
    style A fill:#4caf50
    style C fill:#ffc107
```

**Backend (–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã)**:
- ‚úÖ –î–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ Bootstrap –∫–ª–∞—Å—Å—ã
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML (–æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã)
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç Obsidian Callouts
- ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç JavaScript

**Frontend (JS)**:
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ (copy-code)
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–ª–µ–µ—Ä—ã (Plyr –¥–ª—è –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ)
- ‚úÖ –†–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–ª–ª—Å–∫—Ä–∏–Ω –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚ùå –ù–ï –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É HTML

**–ü—Ä–∏–º–µ—Ä –∏–∑ samples**: `doc/samples/assets/js/main.js`

```javascript
// Frontend –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å—ã —á–µ—Ä–µ–∑ JS
const elementsToCenter = {
    img: ["img-fluid", "d-block", "mx-auto"],
    table: ["table", "table-striped"],
};
```

**–ù–∞—à –ø–æ–¥—Ö–æ–¥**: Backend –¥–µ–ª–∞–µ—Ç —ç—Ç–æ **–¥–æ** –æ—Ç–ø—Ä–∞–≤–∫–∏ HTML –∫–ª–∏–µ–Ω—Ç—É.

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

### –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```mermaid
graph LR
    A[Markdown —Ç–µ–∫—Å—Ç] --> B[markdown.markdown<br/>Phase 2.3]
    B --> C[–ß–∏—Å—Ç—ã–π HTML]
    C --> D[MarkdownProcessor<br/>Phase 2.5]
    D --> E[HTML —Å Bootstrap<br/>–∫–ª–∞—Å—Å–∞–º–∏]
    
    style B fill:#2196f3
    style D fill:#4caf50
```

**–≠—Ç–∞–ø 1**: Markdown ‚Üí HTML (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `markdown`)
```python
html = markdown.markdown(
    markdown_text,
    extensions=["extra", "tables", "fenced_code"],
    output_format="html"
)
# <table><tr><td>Data</td></tr></table>
```

**–≠—Ç–∞–ø 2**: HTML ‚Üí HTML —Å –∫–ª–∞—Å—Å–∞–º–∏ (Beautiful Soup –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã)
```python
processor = MarkdownProcessor([TableProcessor()])
html = processor.process_html(html)
# <table class="table table-striped"><tr><td>Data</td></tr></table>
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞ blog/services/

### –î–æ Phase 2.5 (–º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª)

```
blog/
  ‚îú‚îÄ‚îÄ services.py  # ‚ùå –û–¥–∏–Ω –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª
```

### –ü–æ—Å–ª–µ Phase 2.5 (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

```
blog/
  ‚îî‚îÄ‚îÄ services/                    # üìÅ –ü–∞–∫–µ—Ç
      ‚îú‚îÄ‚îÄ __init__.py              # –≠–∫—Å–ø–æ—Ä—Ç –≥–ª–∞–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
      ‚îú‚îÄ‚îÄ markdown_converter.py    # –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
      ‚îú‚îÄ‚îÄ html_processor.py        # –ë–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å
      ‚îú‚îÄ‚îÄ markdown_processor.py    # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
      ‚îî‚îÄ‚îÄ processors/              # üìÅ –ü–∞–∫–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
          ‚îú‚îÄ‚îÄ __init__.py          # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
          ‚îî‚îÄ‚îÄ table_processor.py   # –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
- ‚úÖ –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üé® –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å HTMLProcessor

### –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```python
from abc import ABC, abstractmethod
from bs4 import BeautifulSoup

class HTMLProcessor(ABC):
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ HTML —ç–ª–µ–º–µ–Ω—Ç–æ–≤."""
    
    @abstractmethod
    def process(self, soup: BeautifulSoup) -> None:
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTML, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—è soup in-place."""
        pass
    
    @abstractmethod
    def get_name(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è."""
        pass
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**1. In-place –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è**

–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç** –Ω–æ–≤—ã–π HTML, –∞ **–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç** –æ–±—ä–µ–∫—Ç `soup`:

```python
def process(self, soup: BeautifulSoup) -> None:
    for table in soup.find_all('table'):
        table['class'] = table.get('class', []) + ['table']
        # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ return
```

**–ü–æ—á–µ–º—É in-place**:
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (–Ω–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚úÖ Beautiful Soup —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (DOM-–ø–æ–¥–æ–±–Ω–∞—è –º–æ–¥–µ–ª—å)
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

**2. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**

–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º** ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –ª–æ–º–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–ª–∞—Å—Å–∞
if 'table' not in table.get('class', []):
    table['class'] = table.get('class', []) + ['table']

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π —Ä–∞–∑
table['class'] = table.get('class', []) + ['table']
```

**3. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤**

–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã **–Ω–µ –¥–æ–ª–∂–Ω—ã** –∑–∞–≤–∏—Å–µ—Ç—å –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞:

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
class TableProcessor(HTMLProcessor):
    def process(self, soup):
        for table in soup.find_all('table'):
            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü—ã

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
class ImageProcessor(HTMLProcessor):
    def process(self, soup):
        # –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ TableProcessor
        for wrapper in soup.find_all(class_='table-wrapper'):
            # –ù–ï–¢! –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
```

---

## üéõÔ∏è –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å MarkdownProcessor

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

```python
from typing import Sequence
from bs4 import BeautifulSoup

class MarkdownProcessor:
    """–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö HTML-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤."""
    
    def __init__(self, processors: Sequence[HTMLProcessor]) -> None:
        self.processors = processors
    
    def process_html(self, html: str) -> str:
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTML –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏."""
        soup = BeautifulSoup(html, 'html.parser')
        
        for processor in self.processors:
            try:
                processor.process(soup)
            except Exception as e:
                print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤ {processor.get_name()}: {e}")
                continue  # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É
        
        return str(soup)
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

**1. Sequence –≤–º–µ—Å—Ç–æ List**

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: Sequence (–∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π)
def __init__(self, processors: Sequence[HTMLProcessor]):
    pass

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: List (–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π)
def __init__(self, processors: List[HTMLProcessor]):
    pass
```

**–ü–æ—á–µ–º—É Sequence**:
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (list, tuple)
- –ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π —Ç–∏–ø (—Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª–∞—Å—Å—ã)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è

**2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback**

```python
try:
    processor.process(soup)
except Exception as e:
    print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤ {processor.get_name()}: {e}")
    continue  # –ù–ï –ø—Ä–µ—Ä—ã–≤–∞–µ–º —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
```

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –û–¥–∏–Ω —Å–ª–æ–º–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä **–Ω–µ –¥–æ–ª–∂–µ–Ω** –ª–æ–º–∞—Ç—å –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω.

**3. –ü–∞—Ä—Å–µ—Ä Beautiful Soup**

```python
soup = BeautifulSoup(html, 'html.parser')
```

**–ü–æ—á–µ–º—É `html.parser`**:
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Python (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–ª—è –Ω–∞—à–∏—Ö –∑–∞–¥–∞—á
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è Bootstrap –∫–ª–∞—Å—Å–æ–≤
- ‚ùå –ù–µ –Ω—É–∂–Ω—ã lxml –∏–ª–∏ html5lib (–∏–∑–±—ã—Ç–æ—á–Ω–æ)

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ convert_markdown_to_html()

### –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

```python
def convert_markdown_to_html(markdown_text: str) -> str:
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç Markdown –≤ HTML —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏."""
    
    if not markdown_text:
        return ""
    
    # ============= –≠–¢–ê–ü 1: Markdown ‚Üí HTML =============
    html = markdown.markdown(
        markdown_text,
        extensions=[
            "extra",
            "fenced_code",
            "tables",
            "codehilite",
            "pymdownx.superfences",
        ],
        extension_configs={...},
        output_format="html"
    )
    
    # ============= –≠–¢–ê–ü 2: HTML ‚Üí HTML —Å –∫–ª–∞—Å—Å–∞–º–∏ =============
    processors = [
        TableProcessor(),
        # ImageProcessor(),      # TODO: Phase 2.6
        # BlockquoteProcessor(), # TODO: Phase 2.6
        # CodeProcessor(),       # TODO: Phase 2.6
    ]
    
    processor = MarkdownProcessor(processors)
    html = processor.process_html(html)
    
    return html
```

### –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```mermaid
sequenceDiagram
    participant MD as Markdown Text
    participant ML as Markdown Lib
    participant MP as MarkdownProcessor
    participant TP as TableProcessor
    participant HTML as Final HTML
    
    MD->>ML: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
    ML->>MP: –ß–∏—Å—Ç—ã–π HTML
    MP->>TP: Beautiful Soup –æ–±—ä–µ–∫—Ç
    TP->>TP: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
    TP->>MP: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π soup
    MP->>HTML: str(soup)
```

**–í–∞–∂–Ω–æ**: –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** –≤ –ø–æ—Ä—è–¥–∫–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Beautiful Soup 4

### Poetry –∫–æ–º–∞–Ω–¥–∞

```bash
poetry add beautifulsoup4
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
```toml
# pyproject.toml
[project]
dependencies = [
    "beautifulsoup4 (>=4.14.3,<5.0.0)"
]
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Beautiful Soup**:
- `soupsieve` (>=1.6.1) ‚Äî CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- `typing-extensions` (>=4.0.0) ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è

### –í–µ—Ä—Å–∏—è 4.14.3

**–ü–æ—á–µ–º—É —ç—Ç–∞ –≤–µ—Ä—Å–∏—è**:
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è (–¥–µ–∫–∞–±—Ä—å 2024)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Python 3.7+
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å Django 6
- ‚úÖ –í—Å–µ –Ω—É–∂–Ω—ã–µ —Ñ–∏—á–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### –î–æ Phase 2.5 (–±–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤)

| –ê—Å–ø–µ–∫—Ç | –°–æ—Å—Ç–æ—è–Ω–∏–µ |
|--------|-----------|
| –¢–∞–±–ª–∏—Ü—ã | `<table>` –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤ |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | `<img>` –Ω–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ |
| –¶–∏—Ç–∞—Ç—ã | `<blockquote>` –±–µ–∑ —Å—Ç–∏–ª–µ–π |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å | ‚ùå –ù—É–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å | ‚ùå –í—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ |

### –ü–æ—Å–ª–µ Phase 2.5 (—Å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏)

| –ê—Å–ø–µ–∫—Ç | –°–æ—Å—Ç–æ—è–Ω–∏–µ |
|--------|-----------|
| –¢–∞–±–ª–∏—Ü—ã | ‚úÖ `<table class="table table-striped">` |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ‚è∏Ô∏è TODO Phase 2.6 |
| –¶–∏—Ç–∞—Ç—ã | ‚è∏Ô∏è TODO Phase 2.6 |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å | ‚úÖ –ù–æ–≤—ã–π —Ñ–∞–π–ª = –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å | ‚úÖ –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ |

---

## üéì –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Beautiful Soup 4 vs –¥—Ä—É–≥–∏–µ –ø–∞—Ä—Å–µ—Ä—ã

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
- **lxml** ‚Äî –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ (C –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- **html5lib** ‚Äî —Å—Ç—Ä–æ–≥–∏–π HTML5, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π
- **regex** ‚Äî —Ö—Ä—É–ø–∫–æ –∏ –æ–ø–∞—Å–Ω–æ

**–ü–æ—á–µ–º—É Beautiful Soup**:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API –¥–ª—è DOM-–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π
- ‚úÖ –¢–æ–ª–µ—Ä–∞–Ω—Ç–µ–Ω –∫ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º—É HTML
- ‚úÖ –ü–∏—Ç–æ–Ω–∏—á–Ω—ã–π –∫–æ–¥
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 2. In-place vs –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å

**In-place (–Ω–∞—à –≤—ã–±–æ—Ä)**:
```python
def process(self, soup: BeautifulSoup) -> None:
    soup.find('table')['class'] = ['table']
    # –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –Ω–∞–ø—Ä—è–º—É—é
```

**–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**:
```python
def process(self, soup: BeautifulSoup) -> BeautifulSoup:
    new_soup = copy.deepcopy(soup)
    new_soup.find('table')['class'] = ['table']
    return new_soup
```

**–ü–æ—á–µ–º—É in-place**:
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (–Ω–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚úÖ Beautiful Soup —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã

### 3. –ü–∞–∫–µ—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ vs –º–æ–Ω–æ–ª–∏—Ç

**–ü–∞–∫–µ—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–∞—à –≤—ã–±–æ—Ä)**:
```
services/
  ‚îú‚îÄ‚îÄ processors/
  ‚îÇ   ‚îú‚îÄ‚îÄ table_processor.py
  ‚îÇ   ‚îú‚îÄ‚îÄ image_processor.py
  ‚îÇ   ‚îî‚îÄ‚îÄ code_processor.py
```

**–ú–æ–Ω–æ–ª–∏—Ç (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**:
```python
# services.py
class TableProcessor: pass
class ImageProcessor: pass
class CodeProcessor: pass
```

**–ü–æ—á–µ–º—É –ø–∞–∫–µ—Ç—ã**:
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∫–æ–¥
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

**–®–∞–≥ 1**: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `blog/services/processors/video_processor.py`

```python
from bs4 import BeautifulSoup
from blog.services.html_processor import HTMLProcessor

class VideoProcessor(HTMLProcessor):
    def process(self, soup: BeautifulSoup) -> None:
        for video in soup.find_all('video'):
            video['class'] = video.get('class', []) + ['plyr-video']
            video['controls'] = ''
    
    def get_name(self) -> str:
        return "VideoProcessor"
```

**–®–∞–≥ 2**: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `blog/services/processors/__init__.py`

```python
from blog.services.processors.video_processor import VideoProcessor

__all__ = [
    "TableProcessor",
    "VideoProcessor",  # –î–æ–±–∞–≤–∏–ª–∏
]
```

**–®–∞–≥ 3**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `markdown_converter.py`

```python
processors = [
    TableProcessor(),
    VideoProcessor(),  # –î–æ–±–∞–≤–∏–ª–∏
]
```

**–ì–æ—Ç–æ–≤–æ**! –ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω.

---

## üß™ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Phase 2.6: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

**ImageProcessor**:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `.img-fluid` –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `.d-block`, `.mx-auto`
- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ñ—É–ª–ª—Å–∫—Ä–∏–Ω-—Ä–µ–∂–∏–º–∞

**BlockquoteProcessor**:
- Bootstrap –∫–ª–∞—Å—Å—ã –¥–ª—è —Ü–∏—Ç–∞—Ç
- Obsidian Callouts (`[!info]`, `[!warning]`)
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–∫–æ–Ω–∫–∏

**CodeProcessor**:
- –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è inline –∫–æ–¥–∞ (`<code>`)
- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è copy-button –∑–æ–Ω
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã

---

## üìù –†–µ–∑—é–º–µ

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ Phase 2.5**:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Beautiful Soup 4.14.3
- ‚úÖ –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω `blog/services.py` –≤ –ø–∞–∫–µ—Ç `blog/services/`
- ‚úÖ –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `HTMLProcessor` (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π)
- ‚úÖ –°–æ–∑–¥–∞–Ω –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å `MarkdownProcessor` (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–∞–∫–µ—Ç `blog/services/processors/`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `TableProcessor` (—Ä–µ—Ñ–µ—Ä–µ–Ω—Å)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (Markdown ‚Üí HTML ‚Üí Beautiful Soup)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**:
- üèõÔ∏è **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ
- üîß **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
- üéØ **In-place**: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- üõ°Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
- üì¶ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

**–°–ª–µ–¥—É—é—â–∞—è —Å–µ—Ä–∏—è**: [–°–µ—Ä–∏—è 14 ‚Äî TableProcessor: —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è](14_table_processor_reference.md)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 14 –¥–µ–∫–∞–±—Ä—è 2025
